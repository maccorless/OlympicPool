{% extends "base.html" %}

{% block title %}{{ contest["name"] }} - Olympic Medal Pool{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Hero Section -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg shadow-lg p-8 mb-8">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-4xl font-bold mb-2">{{ contest["name"] }}</h1>
                <p class="text-xl opacity-90">{{ event["name"] }}</p>
                {% if contest["description"] %}
                    <p class="text-lg opacity-80 mt-2">{{ contest["description"] }}</p>
                {% endif %}
            </div>
            <div class="text-6xl">ğŸ…</div>
        </div>

        <!-- Contest Status Badge -->
        <div class="mt-6">
            {% if contest["state"] == 'setup' %}
                <span class="inline-block bg-yellow-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                    ğŸ”§ Coming Soon
                </span>
            {% elif contest["state"] == 'open' %}
                <span class="inline-block bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                    âœ… Open for Registration
                </span>
            {% elif contest["state"] == 'locked' %}
                <span class="inline-block bg-orange-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                    ğŸ”’ Games in Progress
                </span>
            {% else %}
                <span class="inline-block bg-gray-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                    ğŸ Complete
                </span>
            {% endif %}
        </div>
    </div>

    <!-- Call to Action -->
    {% if contest["state"] == 'open' %}
        <div class="bg-white rounded-lg shadow-md p-6 mb-8 border-l-4 border-blue-600">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Ready to Play?</h2>
                    <p class="text-gray-600">Create your team and compete for the top spot on the leaderboard!</p>
                </div>
                <div class="flex space-x-4">
                    <a href="{{ url_for('register', event_slug=event["slug"], contest_slug=contest["slug"]) }}"
                       class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
                        Register
                    </a>
                    <a href="{{ url_for('login', event_slug=event["slug"], contest_slug=contest["slug"]) }}"
                       class="bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                        Login
                    </a>
                </div>
            </div>
        </div>
    {% elif contest["state"] in ['locked', 'complete'] %}
        <div class="bg-white rounded-lg shadow-md p-6 mb-8 border-l-4 border-purple-600">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">View the Action</h2>
                    <p class="text-gray-600">Check out the leaderboard to see how teams are performing!</p>
                </div>
                <div class="flex space-x-4">
                    <a href="{{ url_for('leaderboard', event_slug=event["slug"], contest_slug=contest["slug"]) }}"
                       class="bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition">
                        View Leaderboard
                    </a>
                    <a href="{{ url_for('login', event_slug=event["slug"], contest_slug=contest["slug"]) }}"
                       class="bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                        Login
                    </a>
                </div>
            </div>
        </div>
    {% endif %}

    <!-- How to Play Section -->
    <div class="bg-white rounded-lg shadow-md p-8 mb-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">How to Play</h2>

        <div class="space-y-6">
            <!-- Step 1 -->
            <div class="flex items-start">
                <div class="flex-shrink-0 bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg mr-4">
                    1
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Register Your Team</h3>
                    <p class="text-gray-600">
                        Create an account and give your team a creative name. You'll receive an SMS code to verify your phone number.
                    </p>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="flex items-start">
                <div class="flex-shrink-0 bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg mr-4">
                    2
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Draft Your Countries</h3>
                    <p class="text-gray-600">
                        Select up to <strong>{{ contest["max_countries"] }} countries</strong> within a budget of <strong>{{ contest["budget"] }} points</strong>.
                        Each country has a different cost based on their medal expectations. Choose wisely!
                    </p>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="flex items-start">
                <div class="flex-shrink-0 bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg mr-4">
                    3
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Watch the Games</h3>
                    <p class="text-gray-600">
                        During the Olympics, your countries earn you points for every medal they win:
                    </p>
                    <ul class="mt-2 space-y-1 text-gray-600">
                        <li>ğŸ¥‡ <strong>Gold Medal</strong> = 3 points</li>
                        <li>ğŸ¥ˆ <strong>Silver Medal</strong> = 2 points</li>
                        <li>ğŸ¥‰ <strong>Bronze Medal</strong> = 1 point</li>
                    </ul>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="flex items-start">
                <div class="flex-shrink-0 bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg mr-4">
                    4
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Climb the Leaderboard</h3>
                    <p class="text-gray-600">
                        Track your progress on the live leaderboard. The team with the most points at the end of the Games wins!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Contest Details -->
    <div class="bg-white rounded-lg shadow-md p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Contest Details</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="border-l-4 border-blue-600 pl-4">
                <h3 class="text-sm font-semibold text-gray-500 uppercase mb-1">Event</h3>
                <p class="text-lg text-gray-900">{{ event["name"] }}</p>
            </div>

            <div class="border-l-4 border-blue-600 pl-4">
                <h3 class="text-sm font-semibold text-gray-500 uppercase mb-1">Dates</h3>
                <p class="text-lg text-gray-900">{{ event["start_date"] }} to {{ event["end_date"] }}</p>
            </div>

            <div class="border-l-4 border-blue-600 pl-4">
                <h3 class="text-sm font-semibold text-gray-500 uppercase mb-1">Draft Budget</h3>
                <p class="text-lg text-gray-900">{{ contest["budget"] }} points</p>
            </div>

            <div class="border-l-4 border-blue-600 pl-4">
                <h3 class="text-sm font-semibold text-gray-500 uppercase mb-1">Max Countries</h3>
                <p class="text-lg text-gray-900">{{ contest["max_countries"] }} countries</p>
            </div>

            {% if contest["state"] == 'open' %}
            <div class="border-l-4 border-red-600 pl-4 md:col-span-2">
                <h3 class="text-sm font-semibold text-gray-500 uppercase mb-1">Registration Deadline</h3>
                <p class="text-lg text-red-600 font-semibold">{{ contest["deadline"] }}</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Final CTA -->
    {% if contest["state"] == 'open' %}
        <div class="mt-8 text-center">
            <a href="{{ url_for('register', event_slug=event["slug"], contest_slug=contest["slug"]) }}"
               class="inline-block bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition shadow-lg">
                Get Started - Register Now
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}
