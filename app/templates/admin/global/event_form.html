{% extends "base.html" %}

{% block title %}{% if event %}Edit Event{% else %}Create Event{% endif %} - Global Admin{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <!-- Breadcrumbs -->
    {% include 'admin/global/_breadcrumbs.html' %}

    <!-- Header -->
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">
            {% if event %}Edit Event{% else %}Create New Event{% endif %}
        </h1>
        <p class="text-gray-600">Olympic Games event configuration</p>
    </div>

    <!-- Form -->
    <div class="bg-white shadow rounded-lg p-8">
        <form method="POST">
            <!-- Name -->
            <div class="mb-6">
                <label for="name" class="block text-gray-700 font-semibold mb-2">
                    Event Name <span class="text-red-500">*</span>
                </label>
                <input type="text" id="name" name="name" required
                       class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="Milano Cortina 2026"
                       value="{{ event.name if event else '' }}">
                <p class="text-sm text-gray-500 mt-1">Full name of the Olympic Games</p>
            </div>

            <!-- Slug -->
            <div class="mb-6">
                <label for="slug" class="block text-gray-700 font-semibold mb-2">
                    Slug <span class="text-red-500">*</span>
                </label>
                <input type="text" id="slug" name="slug" required pattern="[a-z0-9\-]+"
                       class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="milano-2026"
                       value="{{ event.slug if event else '' }}">
                <p class="text-sm text-gray-500 mt-1">URL-friendly identifier (lowercase, hyphens, numbers only)</p>
                {% if event %}
                <div class="mt-2 p-3 bg-yellow-50 border border-yellow-300 rounded">
                    <p class="text-sm text-yellow-900">
                        <strong>⚠️ Warning:</strong> Changing the slug will break all existing contest URLs that include this event slug.
                        Any bookmarks or shared links will stop working. Only change this if absolutely necessary.
                    </p>
                </div>
                {% endif %}
            </div>

            <!-- Description -->
            <div class="mb-6">
                <label for="description" class="block text-gray-700 font-semibold mb-2">Description</label>
                <textarea id="description" name="description" rows="3"
                          class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="XXV Winter Olympic Games">{{ event.description if event else '' }}</textarea>
                <p class="text-sm text-gray-500 mt-1">Optional description shown on contest selector</p>
            </div>

            <!-- Start Date -->
            <div class="mb-6">
                <label for="start_date" class="block text-gray-700 font-semibold mb-2">
                    Start Date <span class="text-red-500">*</span>
                </label>
                <input type="date" id="start_date" name="start_date" required
                       class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       value="{{ event.start_date if event else '' }}">
            </div>

            <!-- End Date -->
            <div class="mb-6">
                <label for="end_date" class="block text-gray-700 font-semibold mb-2">
                    End Date <span class="text-red-500">*</span>
                </label>
                <input type="date" id="end_date" name="end_date" required
                       class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                       value="{{ event.end_date if event else '' }}">
            </div>

            <!-- Is Active -->
            <div class="mb-6">
                <label class="flex items-center">
                    <input type="checkbox" name="is_active" class="mr-2"
                           {% if not event or event.is_active %}checked{% endif %}>
                    <span class="text-gray-700 font-semibold">Active</span>
                </label>
                <p class="text-sm text-gray-500 mt-1">Only active events are shown on contest selector</p>
            </div>

            <!-- Actions -->
            <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                <a href="{{ url_for('global_admin_dashboard') }}" class="text-gray-600 hover:text-gray-800">
                    ← Cancel
                </a>
                <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold">
                    {% if event %}Update Event{% else %}Create Event{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
